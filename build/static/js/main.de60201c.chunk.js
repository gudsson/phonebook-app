(this.webpackJsonpunicafe=this.webpackJsonpunicafe||[]).push([[0],{39:function(e,n,t){},40:function(e,n,t){"use strict";t.r(n);var r=t(15),a=t.n(r),c=t(6),u=t(4),o=t(2),i=t(3),s=t.n(i),d="/api/persons",f=function(){return s.a.get(d).then((function(e){return e.data}))},j=function(e){return s.a.post(d,e).then((function(e){return e.data}))},l=function(e,n){return s.a.put("".concat(d,"/").concat(e),n).then((function(e){return e.data}))},b=function(e){return s.a.delete("".concat(d,"/").concat(e)).then((function(e){return e.data}))},m=t(0),h=function(e){var n=e.noticeObj;if(null===n)return null;var t=n.responseType,r=n.message;return Object(m.jsx)("div",{className:"notice ".concat(t),children:r})},O=function(e){var n=e.persons;return Object(m.jsx)(m.Fragment,{children:n.map((function(e){return Object(m.jsx)(p,{person:e},e.id)}))})},p=function(e){var n=e.person;return Object(m.jsxs)(m.Fragment,{children:[n.name," ",n.number," ",Object(m.jsx)("button",{value:n.id,children:"delete"}),Object(m.jsx)("br",{})]})},v=function(e){var n=e.filter,t=e.handleClick;return Object(m.jsxs)(m.Fragment,{children:["filter shown with",Object(m.jsx)("input",{value:n,onChange:t})]})},g=function(e){var n=e.handleSubmit,t=e.nameState,r=e.numState;return Object(m.jsxs)("form",{onSubmit:n,children:[Object(m.jsxs)("div",{children:["name:",Object(m.jsx)("input",{value:t.newName,onChange:t.handleNameChange})]}),Object(m.jsxs)("div",{children:["number:",Object(m.jsx)("input",{value:r.newNumber,onChange:r.handleNumberChange})]}),Object(m.jsx)("div",{children:Object(m.jsx)("button",{type:"submit",children:"add"})})]})},x=function(){var e=Object(o.useState)(""),n=Object(u.a)(e,2),t=n[0],r=n[1],a=Object(o.useState)(""),i=Object(u.a)(a,2),d=i[0],p=i[1],x=Object(o.useState)(""),w=Object(u.a)(x,2),C=w[0],y=w[1],N=Object(o.useState)([]),S=Object(u.a)(N,2),T=S[0],k=S[1],L=Object(o.useState)(null),D=Object(u.a)(L,2),E=D[0],F=D[1];Object(o.useEffect)((function(){s.a.get("/api/persons").then((function(e){k(e.data)}))}),[]),Object(o.useEffect)((function(){f().then((function(e){k(e)}))}),[]);var B=function(e){var n=e.responseType,t=e.message;F({responseType:n,message:t}),setTimeout((function(){F(null)}),5e3)};return Object(m.jsxs)("div",{children:[Object(m.jsx)("h2",{children:"Phonebook"}),Object(m.jsx)(h,{noticeObj:E}),Object(m.jsx)(v,{filter:C,handleClick:function(e){return y(e.target.value)}}),Object(m.jsx)("h3",{children:"add a new"}),Object(m.jsx)(g,{handleSubmit:function(e){e.preventDefault();var n,a={name:t,number:d};if(n=t,T.every((function(e){return e.name.toLowerCase()!==n.toLowerCase()})))j(a).then((function(e){k(T.concat(e)),B({responseType:"success",message:"Added ".concat(a.name)}),r(""),p("")}));else{var u=window.confirm("".concat(t," is already added to phonebook, replace the old number with a new one?")),o=T.find((function(e){return e.name.toLowerCase()===t.toLowerCase()})).id;u&&l(o,a).then((function(e){k(T.map((function(e){return e.id!==o?e:Object(c.a)(Object(c.a)({},a),{},{id:o})}))),B({responseType:"success",message:"Updated ".concat(a.name)})})).catch((function(e){B({responseType:"error",message:"'".concat(a.name,"' was already removed from server")}),k(T.filter((function(e){return e.id!==o})))}))}},nameState:{newName:t,handleNameChange:function(e){return r(e.target.value)}},numState:{newNumber:d,handleNumberChange:function(e){return p(e.target.value)}}}),Object(m.jsx)("h3",{children:"Numbers"}),Object(m.jsx)("div",{onClick:function(e){if(e.preventDefault(),"BUTTON"===e.target.tagName){var n=e.target.value;window.confirm("Delete ".concat(T.find((function(e){return e.id===n})).name," ?"))&&function(e){var n=T.find((function(n){return n.id===e}));b(e).then((function(n){k(T.filter((function(n){return n.id!==e})))})).catch((function(e){B({responseType:"error",message:"'".concat(n.name,"' was already removed from server")})}))}(n)}},children:Object(m.jsx)(O,{persons:function(e){return""===C?e:e.filter((function(e){return e.name.toLowerCase().includes(C.toLowerCase())}))}(T)})})]})};t(39);a.a.render(Object(m.jsx)(x,{}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.de60201c.chunk.js.map