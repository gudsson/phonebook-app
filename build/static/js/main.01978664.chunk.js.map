{"version":3,"sources":["services/persons.js","components/Notification.js","App.js","index.js"],"names":["baseUrl","console","log","axios","get","then","response","data","newObject","post","id","put","delete","Notification","noticeObj","responseType","message","className","Persons","persons","map","person","Person","name","number","value","Filter","filter","handleClick","onChange","PersonForm","handleSubmit","nameState","numState","onSubmit","newName","handleNameChange","newNumber","handleNumberChange","type","App","useState","setNewName","setNewNumber","setFilter","setPersons","setNoticeObj","useEffect","personService","savedPersons","displayNotice","setTimeout","e","target","event","preventDefault","submittedName","personObj","every","toLowerCase","returnedPerson","concat","result","window","confirm","find","updatedPerson","catch","error","p","onClick","tagName","n","deletePerson","includes","applyFilter","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.01978664.chunk.js","sourcesContent":["import axios from 'axios'\nconst baseUrl = '/api/persons'\n\nconsole.log(baseUrl)\n\nconst getAll = () => {\n  const request = axios.get(baseUrl)\n  return request.then(response => response.data)\n}\n\nconst create = newObject => {\n  const request = axios.post(baseUrl, newObject)\n  return request.then(response => response.data)\n}\n\nconst update = (id, newObject) => {\n  const request = axios.put(`${baseUrl}/${id}`, newObject)\n  return request.then(response => response.data)\n}\n\nconst remove = id => {\n  const request = axios.delete(`${baseUrl}/${id}`)\n  return request.then(response => response.data)\n}\n\nexport default { getAll, create, update, remove }","import React from 'react'\n\nconst Notification = ({ noticeObj }) => {\n  if (noticeObj === null) {\n    return null\n  }\n  \n  let { responseType, message } = noticeObj\n\n  return (\n    <div className={`notice ${responseType}`}>\n      {message}\n    </div>\n  )\n}\n\nexport default Notification","import React, { useState, useEffect } from 'react'\nimport axios from 'axios'\nimport personService from './services/persons'\nimport Notification from './components/Notification'\n\nconst Persons = ({ persons }) => {\n  return (\n    <>\n      {persons.map(person => \n        <Person key={person.id} person={person} />\n      )}\n    </>\n  )\n}\n\nconst Person = ({ person }) => {\n  return (\n    <>{person.name} {person.number} <button value={person.id}>delete</button><br /></>\n  )\n}\n\nconst Filter = ({ filter, handleClick }) => {\n  return (\n    <>\n      filter shown with\n      <input \n        value={filter}\n        onChange={handleClick}\n      />\n    </>\n  )\n}\n\nconst PersonForm = ({ handleSubmit, nameState, numState }) => {\n  return (\n    <form onSubmit={handleSubmit}>\n        <div>\n          name: \n          <input\n            value={nameState.newName}\n            onChange={nameState.handleNameChange}\n          />\n        </div>\n        <div>number: \n          <input \n            value={numState.newNumber}\n            onChange={numState.handleNumberChange}\n          />\n        </div>\n        <div>\n          <button type=\"submit\">add</button>\n        </div>\n    </form>\n  )\n}\n\nconst App = () => {\n  const [ newName, setNewName ] = useState('')\n  const [ newNumber, setNewNumber ] = useState('')\n  const [ filter, setFilter ] = useState('')\n  const [ persons, setPersons ] = useState([])\n  const [ noticeObj, setNoticeObj ] = useState(null)\n\n  useEffect(() => {\n    axios\n      .get('/api/persons')\n      .then(response => {\n        setPersons(response.data)\n      })\n  }, [])\n\n  useEffect(() => {\n    personService\n      .getAll()\n      .then(savedPersons => {\n        setPersons(savedPersons)\n      })\n  }, [])\n  \n\n  const addNewPerson = (event) => {\n    event.preventDefault();\n\n    let personObj = { name: newName, number: newNumber }\n\n    const isUniqueName = (submittedName) => {\n      return persons.every(person => person.name.toLowerCase() !== submittedName.toLowerCase())\n    }\n\n    if (isUniqueName(newName)) {\n\n      personService\n        .create(personObj)\n        .then(returnedPerson => {\n          setPersons(persons.concat(returnedPerson))\n          displayNotice({\n            responseType: 'success',\n            message: `Added ${personObj.name}`\n          })\n          setNewName('')\n          setNewNumber('')\n        })\n\n    } else {\n      let result = window.confirm(`${newName} is already added to phonebook, replace the old number with a new one?`)\n      let id = persons.find(person => person.name.toLowerCase() === newName.toLowerCase()).id\n      if (result) {\n        personService\n          .update(id, personObj)\n          .then(updatedPerson => {\n            setPersons(persons.map(person => person.id !== +id ? person : updatedPerson))\n            displayNotice({\n              responseType: 'success',\n              message: `Updated ${personObj.name}`\n            })\n          })\n          .catch(error => {\n            displayNotice({\n              responseType: 'error',\n              message: `'${personObj.name}' was already removed from server`\n            })\n\n            setPersons(persons.filter(p => p.id !== +id))\n          })\n      }\n    }\n  }\n\n  const deletePerson = id => {\n    const person = persons.find(n => n.id === id)\n  \n    personService\n      .remove(id)\n      .then(returnedPerson => {\n        setPersons(persons.filter(person => person.id !== +id))\n      })\n      .catch(error => {\n        displayNotice({\n          responseType: 'error',\n          message: `'${person.name}' was already removed from server`\n        })\n      })\n  }\n\n  const displayNotice = ({ responseType, message }) => {\n    setNoticeObj({ responseType, message })\n\n    setTimeout(() => {\n      setNoticeObj(null)\n    }, 5000)\n  }\n\n  const handleFilterChange = e => setFilter(e.target.value);\n  const handleNameChange = e => setNewName(e.target.value);\n  const handleNumberChange = e => setNewNumber(e.target.value);\n\n  const handleDelete = e => {\n    e.preventDefault();\n    if (e.target.tagName === 'BUTTON') {\n      let id = e.target.value\n      let result = window.confirm(`Delete ${persons.find(p => p.id === +id).name} ?`)\n\n      if (result) deletePerson(id)\n    }\n  }\n\n  const applyFilter = (persons) => {\n    if (filter === '') return persons;\n    return persons.filter(person => person.name.toLowerCase().includes(filter.toLowerCase()));\n  }\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification noticeObj={noticeObj} />\n\n      <Filter\n        filter={filter}\n        handleClick={handleFilterChange}\n      />\n\n      <h3>add a new</h3>\n\n      <PersonForm\n        handleSubmit={addNewPerson}\n        nameState={ { newName, handleNameChange } }\n        numState={ { newNumber, handleNumberChange } }\n      />\n\n      <h3>Numbers</h3>\n\n      <div onClick={handleDelete}>\n        <Persons persons={applyFilter(persons)} />\n      </div>\n    </div>\n    )\n}\n\nexport default App","import ReactDOM from 'react-dom'\nimport App from './App.js'\nimport './index.css'\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n)"],"sourceRoot":""}