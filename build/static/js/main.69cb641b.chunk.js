(this.webpackJsonpunicafe=this.webpackJsonpunicafe||[]).push([[0],{38:function(e,n,t){},39:function(e,n,t){"use strict";t.r(n);var r=t(14),a=t.n(r),c=t(4),o=t(2),s=t(3),u=t.n(s),i="/api/persons",d=function(){return u.a.get(i).then((function(e){return e.data}))},f=function(e){return u.a.post(i,e).then((function(e){return e.data}))},j=function(e,n){return u.a.put("".concat(i,"/").concat(e),n).then((function(e){return e.data}))},l=function(e){return u.a.delete("".concat(i,"/").concat(e)).then((function(e){return e.data}))},b=t(0),m=function(e){var n=e.noticeObj;if(null===n)return null;var t=n.responseType,r=n.message;return Object(b.jsx)("div",{className:"notice ".concat(t),children:r})},h=function(e){var n=e.persons;return Object(b.jsx)(b.Fragment,{children:n.map((function(e){return Object(b.jsx)(p,{person:e},e.id)}))})},p=function(e){var n=e.person;return Object(b.jsxs)(b.Fragment,{children:[n.name," ",n.number," ",Object(b.jsx)("button",{value:n.id,children:"delete"}),Object(b.jsx)("br",{})]})},O=function(e){var n=e.filter,t=e.handleClick;return Object(b.jsxs)(b.Fragment,{children:["filter shown with",Object(b.jsx)("input",{value:n,onChange:t})]})},v=function(e){var n=e.handleSubmit,t=e.nameState,r=e.numState;return Object(b.jsxs)("form",{onSubmit:n,children:[Object(b.jsxs)("div",{children:["name:",Object(b.jsx)("input",{value:t.newName,onChange:t.handleNameChange})]}),Object(b.jsxs)("div",{children:["number:",Object(b.jsx)("input",{value:r.newNumber,onChange:r.handleNumberChange})]}),Object(b.jsx)("div",{children:Object(b.jsx)("button",{type:"submit",children:"add"})})]})},g=function(){var e=Object(o.useState)(""),n=Object(c.a)(e,2),t=n[0],r=n[1],a=Object(o.useState)(""),s=Object(c.a)(a,2),i=s[0],p=s[1],g=Object(o.useState)(""),x=Object(c.a)(g,2),w=x[0],C=x[1],y=Object(o.useState)([]),N=Object(c.a)(y,2),S=N[0],T=N[1],k=Object(o.useState)(null),L=Object(c.a)(k,2),D=L[0],E=L[1];Object(o.useEffect)((function(){u.a.get("/api/persons").then((function(e){T(e.data)}))}),[]),Object(o.useEffect)((function(){d().then((function(e){T(e)}))}),[]);var F=function(e){var n=e.responseType,t=e.message;E({responseType:n,message:t}),setTimeout((function(){E(null)}),5e3)};return Object(b.jsxs)("div",{children:[Object(b.jsx)("h2",{children:"Phonebook"}),Object(b.jsx)(m,{noticeObj:D}),Object(b.jsx)(O,{filter:w,handleClick:function(e){return C(e.target.value)}}),Object(b.jsx)("h3",{children:"add a new"}),Object(b.jsx)(v,{handleSubmit:function(e){e.preventDefault();var n,a={name:t,number:i};if(n=t,S.every((function(e){return e.name.toLowerCase()!==n.toLowerCase()})))f(a).then((function(e){T(S.concat(e)),F({responseType:"success",message:"Added ".concat(a.name)}),r(""),p("")})).catch((function(e){F({responseType:"error",message:e.response.data.error})}));else{var c=window.confirm("".concat(t," is already added to phonebook, replace the old number with a new one?")),o=S.find((function(e){return e.name.toLowerCase()===t.toLowerCase()})).id;c&&j(o,a).then((function(e){T(S.map((function(n){return n.id!==o?n:e}))),F({responseType:"success",message:"Updated ".concat(a.name)})})).catch((function(e){F({responseType:"error",message:e.response.data.error})}))}},nameState:{newName:t,handleNameChange:function(e){return r(e.target.value)}},numState:{newNumber:i,handleNumberChange:function(e){return p(e.target.value)}}}),Object(b.jsx)("h3",{children:"Numbers"}),Object(b.jsx)("div",{onClick:function(e){if(e.preventDefault(),"BUTTON"===e.target.tagName){var n=e.target.value;window.confirm("Delete ".concat(S.find((function(e){return e.id===n})).name," ?"))&&function(e){var n=S.find((function(n){return n.id===e}));l(e).then((function(t){T(S.filter((function(n){return n.id!==e}))),F({responseType:"success",message:"'".concat(n.name,"' was successfully removed from phonebook")})})).catch((function(e){F({responseType:"error",message:"'".concat(n.name,"' was already removed from phonebook")})}))}(n)}},children:Object(b.jsx)(h,{persons:function(e){return""===w?e:e.filter((function(e){return e.name.toLowerCase().includes(w.toLowerCase())}))}(S)})})]})};t(38);a.a.render(Object(b.jsx)(g,{}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.69cb641b.chunk.js.map